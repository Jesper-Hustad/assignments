<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Øving 6</title>
</head>
<body>
    <h2>Nettverksprogrammering Øving 6</h2>
    <h1>WebSockets</h1>
    <p>Send meldinger til andre klienter</p>

    <input id="input">
    <button onclick="sendMessage()">Send melding</button>
    <br><br>
    <div id="chat"></div>

</body>

<script>
    const ws = new WebSocket('ws://localhost:3001');
    
    ws.onmessage = event => addChatMessage("Friend: " + event.data)

    function sendMessage(){
        const message = document.getElementById('input').value
        ws.send(message)
        addChatMessage("Me: " + message)
    }

    function addChatMessage(message){
        const chatDiv = document.getElementById("chat")
        const newDiv = document.createElement("div")
        const newMessage = document.createTextNode(message)
        newDiv.appendChild(newMessage)
        chatDiv.appendChild(newDiv)
    } 
</script>

<style>
    :root {font-family: Arial, Helvetica, sans-serif;}
    #chat{width: 20rem; height: 10rem; overflow: scroll; border: 1px solid black;}
</style>
</html>